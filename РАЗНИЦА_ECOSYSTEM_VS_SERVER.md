# üîç –†–ê–ó–ù–ò–¶–ê –ú–ï–ñ–î–£ ECOSYSTEM.CONFIG.JS –ò SERVER.JS

## üìã –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

### `server/server.js` 
- üéØ **–≠—Ç–æ —Å–∞–º –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - Express —Å–µ—Ä–≤–µ—Ä, –º–∞—Ä—à—Ä—É—Ç—ã, WebSocket, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üìù **–ó–¥–µ—Å—å –º—ã –ø–∏—à–µ–º –ª–æ–≥–∏–∫—É** - –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤, API endpoints, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- üîß **–í—Å–µ –Ω–∞—à–∏ –ø—Ä–∞–≤–∫–∏** –¥–µ–ª–∞—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ

### `ecosystem.config.js`
- ‚öôÔ∏è **–≠—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è PM2** - –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å, –≥–¥–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- üéÆ **–≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è PM2** - "–∑–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å —Ç–∞–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏"
- üìä **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å–∫–∞** - –ø–æ—Ä—Ç—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ä–µ—Å—Ç–∞—Ä—Ç—ã

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```mermaid
graph LR
    A[PM2] --> B[ecosystem.config.js]
    B --> C[server/server.js]
    B --> D[Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥]
    C --> E[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]
    C --> F[API]
    D --> G[React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã]
```

### –ü–æ—à–∞–≥–æ–≤–æ:
1. **PM2** —á–∏—Ç–∞–µ—Ç `ecosystem.config.js`
2. **ecosystem.config.js** –≥–æ–≤–æ—Ä–∏—Ç PM2: "–∑–∞–ø—É—Å—Ç–∏ `./server/server.js`"
3. **PM2** –∑–∞–ø—É—Å–∫–∞–µ—Ç `server/server.js` —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
4. **server.js** —Å–æ–∑–¥–∞–µ—Ç Express —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î

## üìÅ –ß—Ç–æ –≥–¥–µ –ª–µ–∂–∏—Ç?

```
malabar/
‚îú‚îÄ‚îÄ ecosystem.config.js     ‚Üê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø PM2
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ server.js          ‚Üê –ö–û–î –°–ï–†–í–ï–†–ê (—Ç—É—Ç –º—ã –¥–µ–ª–∞–µ–º –ø—Ä–∞–≤–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ package.json       ‚Üê –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ pages/                 ‚Üê –§–†–û–ù–¢–ï–ù–î NEXT.JS
‚îú‚îÄ‚îÄ components/
‚îî‚îÄ‚îÄ package.json           ‚Üê –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```

## ‚ö° –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∑–∞–ø—É—Å–∫–µ?

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
```bash
cd server
node server.js
```

### –ß–µ—Ä–µ–∑ PM2 (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):
```bash
pm2 start ecosystem.config.js
```

## üéØ –ü–æ—á–µ–º—É —á–µ—Ä–µ–∑ ecosystem.config.js?

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ —Ñ–∞–π–ª—ã —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- üéÆ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏** (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ + –±—ç–∫–µ–Ω–¥)
- üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Ä–µ—Å—É—Ä—Å–æ–≤
- üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- üíæ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏** –∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

### ‚ùå –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫:
- üí• –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ - –≤—Å—ë, –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä—É–∫–∞–º–∏
- üìù –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å
- üéØ –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å
- üõ†Ô∏è –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üö® –í–´ –ü–†–ê–í–´ - –Ø –ù–ï –ó–ê–ü–£–°–¢–ò–õ –§–†–û–ù–¢–ï–ù–î!

–í `ecosystem.config.js` —É –Ω–∞—Å **–î–í–ê** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```javascript
{
  name: 'malabar-server',    // –ë–≠–ö–ï–ù–î (API —Å–µ—Ä–≤–µ—Ä)
  script: './server/server.js'
},
{
  name: 'malabar-frontend',  // –§–†–û–ù–¢–ï–ù–î (Next.js)
  script: 'npm',
  args: 'start'
}
```

### –Ø –∑–∞–ø—É—Å–∫–∞–ª —Ç–æ–ª—å–∫–æ:
```bash
pm2 start ecosystem.config.js --only malabar-server  # ‚ö†Ô∏è –¢–û–õ–¨–ö–û –ë–≠–ö–ï–ù–î!
```

### –ê –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:
```bash
pm2 start ecosystem.config.js  # ‚úÖ –ò –ë–≠–ö–ï–ù–î –ò –§–†–û–ù–¢–ï–ù–î!
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

### –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:
```bash
pm2 stop all
pm2 delete all
pm2 start ecosystem.config.js  # –ë–ï–ó --only!
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
pm2 status
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# malabar-server   ‚îÇ online
# malabar-frontend ‚îÇ online
```

## üìä –ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

- **–ë—ç–∫–µ–Ω–¥ API**: http://localhost:3001/api/health
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: http://localhost:3000
- **WebSocket**: ws://localhost:3001/ws

---

**–í—ã–≤–æ–¥**: –ú—ã –ø—Ä–∞–≤–∏–º –∫–æ–¥ –≤ `server.js`, –Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ `ecosystem.config.js` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –ò –¥–∞, —è –∑–∞–±—ã–ª –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥! üòÖ
