# ğŸš€ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ«Ğ™ Ğ—ĞĞŸĞ£Ğ¡Ğš ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ¯

## ğŸ¯ Ğ’ĞĞ–ĞĞ: Ğ”Ğ²Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼!

Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¸Ğ· **Ğ”Ğ’Ğ£Ğ¥** Ñ‡Ğ°ÑÑ‚ĞµĞ¹:

1. **ğŸ”§ Ğ‘ÑĞºĞµĞ½Ğ´** (`server/server.js`) - API ÑĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 3001
2. **ğŸŒ Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´** (Next.js) - Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 3000

## âš™ï¸ ĞšĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ecosystem.config.js                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   malabar-server    â”‚   â”‚    malabar-frontend       â”‚ â”‚
â”‚  â”‚  (API Ğ½Ğ° :3001)     â”‚   â”‚   (Next.js Ğ½Ğ° :3000)      â”‚ â”‚
â”‚  â”‚                     â”‚   â”‚                           â”‚ â”‚
â”‚  â”‚  ./server/server.js â”‚â—„â”€â”€â”¤  npm start                â”‚ â”‚
â”‚  â”‚                     â”‚   â”‚                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Ğ§Ñ‚Ğ¾ Ñ Ğ´ĞµĞ»Ğ°Ğ» Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾:

### âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ (Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ğ» Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ÑĞºĞµĞ½Ğ´):
```bash
pm2 start ecosystem.config.js --only malabar-server
```

### âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ (Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ Ğ¾Ğ±Ğ°):
```bash
pm2 start ecosystem.config.js
```

## ğŸš€ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ´Ğ»Ñ VPS:

### ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº:
```bash
# 1. ĞÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ²ÑÑ‘
pm2 stop all
pm2 delete all

# 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
cd server && npm install && cd ..
npm install

# 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸
node create-logs-dir.js

# 4. Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ ĞĞ‘Ğ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
pm2 start ecosystem.config.js

# 5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼
pm2 status
```

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ (Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚):
```bash
./fix-and-restart-server.sh
```

## ğŸ“Š Ğ§Ñ‚Ğ¾ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ² pm2 status:

```bash
pm2 status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ App name        â”‚ id â”‚ version     â”‚ mode    â”‚ pid     â”‚ status   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ malabar-server  â”‚ 0  â”‚ 1.0.0       â”‚ fork    â”‚ 12345   â”‚ online   â”‚
â”‚ malabar-frontendâ”‚ 1  â”‚ 0.1.0       â”‚ fork    â”‚ 12346   â”‚ online   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸:

### API (Ğ±ÑĞºĞµĞ½Ğ´):
```bash
curl http://localhost:3001/api/health
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ: {"status":"OK","timestamp":"..."}
```

### Ğ’ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ (Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´):
```bash
curl -I http://localhost:3000
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ: HTTP/1.1 200 OK
```

### Ğ’ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ:
- **Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´**: http://46.173.17.229:3000 (Ğ¸Ğ»Ğ¸ Ğ²Ğ°Ñˆ Ğ´Ğ¾Ğ¼ĞµĞ½)
- **API**: http://46.173.17.229:3001/api/health

## ğŸ” Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼:

### Ğ•ÑĞ»Ğ¸ Ğ±ÑĞºĞµĞ½Ğ´ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:
```bash
pm2 logs malabar-server
```

### Ğ•ÑĞ»Ğ¸ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:
```bash
pm2 logs malabar-frontend
```

### Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ñ€Ñ‚ Ğ·Ğ°Ğ½ÑÑ‚:
```bash
lsof -i :3000  # Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´
lsof -i :3001  # Ğ±ÑĞºĞµĞ½Ğ´
```

## ğŸ› ï¸ Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:

### 1. **Next.js Ğ½Ğµ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ**
```bash
# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
npm run build
npm start
```

### 2. **Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹**
```bash
# ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ (Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´)
npm install

# Ğ¡ĞµÑ€Ğ²ĞµÑ€ (Ğ±ÑĞºĞµĞ½Ğ´)
cd server && npm install && cd ..
```

### 3. **ĞŸÑ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°**
```bash
chmod 755 server/server.js
chmod +x fix-and-restart-server.sh
```

## ğŸ¯ Ğ˜Ñ‚Ğ¾Ğ³:

- **ecosystem.config.js** = ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ PM2 (ĞšĞĞš Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ÑŒ)
- **server/server.js** = ĞºĞ¾Ğ´ Ğ±ÑĞºĞµĞ½Ğ´Ğ° (Ğ§Ğ¢Ğ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ÑŒ)
- **pages/*** = ĞºĞ¾Ğ´ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ° (Next.js)

ĞœÑ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ¼ ĞºĞ¾Ğ´ Ğ² `server.js`, Ğ½Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ñ‡ĞµÑ€ĞµĞ· `ecosystem.config.js` Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ PM2 ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞ» Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸ Ğ¸ Ğ»Ğ¾Ğ³Ğ°Ğ¼Ğ¸.

**Ğ˜ Ğ´Ğ°, Ñ Ğ·Ğ°Ğ±Ñ‹Ğ» Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´! Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ».** ğŸ˜…

---

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ**: âœ… Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾  
**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°**: `./fix-and-restart-server.sh`
