# üîß SQLITE3 –û–®–ò–ë–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:
```
Error: /var/www/malabar/server/node_modules/sqlite3/build/Release/node_sqlite3.node: invalid ELF header
```

**–ü—Ä–∏—á–∏–Ω–∞**: SQLite3 –º–æ–¥—É–ª—å –±—ã–ª —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –¥–ª—è –¥—Ä—É–≥–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Windows) –∏ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Linux VPS.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### üöÄ –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
cd /var/www/malabar
git pull origin main
chmod +x quick-sqlite3-fix.sh
./quick-sqlite3-fix.sh
```

### üîß –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–µ—Å–ª–∏ –±—ã—Å—Ç—Ä–æ–µ –Ω–µ –ø–æ–º–æ–≥–ª–æ):

```bash
cd /var/www/malabar  
git pull origin main
chmod +x fix-sqlite3-error.sh
./fix-sqlite3-error.sh
```

## üìã –ß—Ç–æ –¥–µ–ª–∞—é—Ç —Å–∫—Ä–∏–ø—Ç—ã:

### 1. **–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö `node_modules` 
- –û—á–∏—Å—Ç–∫–∞ npm cache

### 2. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `build-essential`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `python3` –∏ `make`
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### 3. **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
- Backend: `npm install --build-from-source`
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è SQLite3 –¥–ª—è Linux
- Frontend: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ SQLite3 –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –¢–µ—Å—Ç Backend API
- –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ Backend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ SQLite3
- ‚úÖ API –æ—Ç–≤–µ—á–∞–µ—Ç: `/api/health`, `/api/players`
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã online
- ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –≤—Å–µ–º –∞–¥—Ä–µ—Å–∞–º

## üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```bash
# –°—Ç–∞—Ç—É—Å PM2
pm2 status

# API —Ç–µ—Å—Ç—ã  
curl http://localhost:3001/api/health
curl http://localhost:3001/api/players

# –ë—Ä–∞—É–∑–µ—Ä
http://46.173.17.229:3000
http://vet-klinika-moscow.ru
```

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
pm2 logs malabar-backend --lines 20
```

### 2. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SQLite3:
```bash
cd /var/www/malabar/server
node -e "console.log(require('sqlite3'))"
```

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ SQLite3:
```bash
cd /var/www/malabar/server
npm uninstall sqlite3
npm install sqlite3 --build-from-source --verbose
```

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

SQLite3 - —ç—Ç–æ –Ω–∞—Ç–∏–≤–Ω—ã–π –º–æ–¥—É–ª—å Node.js, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- **Windows x64** ‚Üí `.node` —Ñ–∞–π–ª –¥–ª—è Windows
- **Linux x64** ‚Üí `.node` —Ñ–∞–π–ª –¥–ª—è Linux  
- **macOS** ‚Üí `.node` —Ñ–∞–π–ª –¥–ª—è macOS

–ö–æ–≥–¥–∞ `node_modules` –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —ç—Ç–∞ –æ—à–∏–±–∫–∞.

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å —Ñ–ª–∞–≥–æ–º `--build-from-source`.

---

## üöÄ –ó–ê–ü–£–°–ö–ê–ô–¢–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï!

```bash
cd /var/www/malabar
./quick-sqlite3-fix.sh
```

**SQLite3 –æ—à–∏–±–∫–∞ –±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! üéâ**
